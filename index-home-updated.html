# Generate the updated Gallery section with animated text content (no images yet) using a smooth scroll/Apple-style layout
from pathlib import Path

# Load the last updated HTML file
index_html_path = Path("/mnt/data/index-home-updated.html")
html = index_html_path.read_text()

# Define gallery text-based highlights with scroll animation using intersection observer pattern
gallery_html = """
<section id="gallery" class="section gallery-highlights">
  <h2>Gallery Highlights</h2>
  <p class="gallery-description">Visual snapshots from various chapters of my journey. More images can be found within each 'My Journey' chapter entry.</p>
  <ul class="gallery-list">
    <li>Sathyabama University Logo</li>
    <li>Glider Competition Award</li>
    <li>University of Greenwich Logo</li>
    <li>Dissertation Research Setup</li>
    <li>Exploring London</li>
    <li>Cultural Event in UK</li>
    <li>Networking Meetup</li>
    <li>Online Certification Screen</li>
  </ul>
</section>
"""

# Add CSS for smooth scroll animation via classes
gallery_style = """
/* Gallery Highlights Section */
.gallery-highlights {
  text-align: center;
  padding: 60px 20px;
  background: #fff;
}
.gallery-highlights h2 {
  font-size: 2rem;
  margin-bottom: 20px;
}
.gallery-description {
  font-size: 1rem;
  max-width: 600px;
  margin: 0 auto 30px;
  color: #555;
}
.gallery-list {
  list-style-type: none;
  padding: 0;
}
.gallery-list li {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.8s ease-out, transform 0.8s ease-out;
  font-size: 1.1rem;
  margin: 12px 0;
}
.gallery-list li.visible {
  opacity: 1;
  transform: translateY(0);
}
"""

# Inject style.css update instruction
style_path = Path("/mnt/data/style.css")
style_content = style_path.read_text()
style_content += "\n" + gallery_style
style_path.write_text(style_content)

# Insert gallery section by replacing placeholder #gallery section
import re
html = re.sub(r'<section id="gallery".*?</section>', gallery_html, html, flags=re.DOTALL)

# Add intersection observer script before </body>
gallery_script = """
<script>
  const galleryItems = document.querySelectorAll('.gallery-list li');
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
        observer.unobserve(entry.target);
      }
    });
  }, {
    threshold: 0.2
  });

  galleryItems.forEach(item => {
    observer.observe(item);
  });
</script>
</body>
"""
html = html.replace("</body>", gallery_script)

# Save updated file
output_path = "/mnt/data/index-gallery-updated.html"
Path(output_path).write_text(html)
output_path
